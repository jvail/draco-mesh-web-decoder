<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>draco</title>
</head>

<body>

    <script type="module">
        import getWorker from '../dist/index.js';
        const worker = getWorker();
        worker.onmessage = msg => {
            if ('initialized' in msg.data && msg.data.initialized) {
                fetch('../src/draco/javascript/example/models/bunny.drc')
                    .then(response => response.arrayBuffer())
                    .then(buffer => {
                        worker.postMessage(buffer, [buffer])
                    })
            } else if (msg.data) {
                console.log(msg.data);
            } else {
                console.log('error');
            }
        };

    </script>

</body>

</html>
